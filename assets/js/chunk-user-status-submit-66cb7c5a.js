System.register(["./chunk-frameworks.js","./chunk-vendor.js"],(function(e){"use strict";var t,s,r,n,u,o,c,i,a,l,d,f;return{setters:[function(e){t=e.o,s=e.R,r=e.E,n=e.bg,u=e.az,o=e.r,c=e.aA,i=e.e},function(e){a=e.a,l=e.h,d=e.r,f=e.o}],execute:function(){function j(e){return e.querySelector(".js-user-status-details").hasAttribute("open")}function m(e){const t=e.querySelector(".js-user-status-org-picker");t&&!t.src&&(t.src=t.getAttribute("data-url"))}function g(e,t){const s=e.querySelector(".js-user-status-emoji-picker");if(!s||s.src)return;let r=s.getAttribute("data-url");if(t){const e=new URL(r,window.location.origin);e.searchParams.append("show_picker","1"),r=e.toString()}s.src=r}function y(e){const t=e.querySelector(".js-user-status-original-emoji"),s=e.querySelector(".js-user-status-custom-emoji"),r=e.querySelector(".js-user-status-no-emoji-icon");s.innerHTML=t.innerHTML,r.hidden=s.hasChildNodes()}function S(e){const t=e.querySelector(".js-user-status-suggestions"),s=e.querySelector(".js-user-status-message-field").value.trim().length>0;t.classList.toggle("collapsed",s),t.setAttribute("aria-expanded",s.toString())}function p(e,t){j(e)?function(e){const t=e.querySelector(".js-user-status-message-field");y(e),function(e){const t=e.querySelector(".js-emoji-picker");t&&(t.reset(),t.close())}(e),t.value=t.defaultValue,c(e)}(e):function(e,t){y(e),g(e,t),m(e)}(e,t),v(e)}function q(e,t){e.querySelector(".js-user-status-custom-emoji").innerHTML=t.innerHTML;e.querySelector(".js-user-status-no-emoji-icon").hidden=!0}function h(e,t){e.querySelector(".js-user-status-emoji-field").value=t.value}function L(e,t){if("Escape"===l(t)){const t=e.closest(".js-user-status-container");if(!(t instanceof HTMLElement))return;e.value=e.defaultValue,p(t,!1)}}function v(e){const t=e.querySelector(".js-user-status-submit"),s=e.querySelector(".js-clear-user-status-button"),r=e.querySelector(".js-user-status-message-field"),u=e.querySelector(".js-user-status-emoji-field"),o=r.value.trim(),c=u.value.trim();let i=!1,a=!1;n(r)&&(i=!0),o.length<1&&c.length<1&&(i=!0,s.classList.contains("js-user-status-exists")||(a=!0)),t.disabled=i,s.disabled=a}function b(e){return e.closest(".js-user-status-container")}function k(e,t){if(j(e))return;const s=e.querySelectorAll(".js-toggle-user-status-edit.Details-content--closed");for(const r of s)r.classList.toggle("color-text-link",t),r.classList.toggle("Link--primary",!t)}function T(e){if(!(e.target instanceof Element))return;k(e.target.closest(".js-user-status-container"),!0)}function x(e){if(!(e.target instanceof Element))return;k(e.target.closest(".js-user-status-container"),!1)}e("init",(function(e){g(e,!1),m(e)})),a("click",".js-user-status-expire-button",(function(e){const t=e.currentTarget;if(!(t instanceof HTMLButtonElement))return;!function(e,t){const s=e.querySelector(".js-user-status-expiration-interval-selected"),r=e.querySelector(".js-user-status-expire-drop-down"),n=e.querySelector(".js-user-status-expiration-date-input");s.textContent=t.title,n.value=t.value,r.removeAttribute("open")}(b(t),t)})),a("click",".js-toggle-user-status-edit",(function(e){const t=e.currentTarget;p(b(t),!!t.closest(".js-toggle-user-status-emoji-picker"))})),a("click",".js-toggle-user-status-emoji-picker",(function(e){const t=b(e.currentTarget).querySelector(".js-emoji-picker");t&&(e.stopPropagation(),t.hidden?t.open():t.close())}),{capture:!0}),a("click",".js-user-status-emoji-button",(function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&function(e){var t;const s=e.closest(".js-user-status-container"),r=s.querySelector(".js-emoji-picker");h(s,e),null===(t=r.querySelector(".selected-emoji"))||void 0===t||t.classList.remove("selected-emoji"),e.classList.add("selected-emoji"),q(s,e),v(s),r.close()}(t)})),a("click",".js-emoji-tab",(function(e){const t=e.currentTarget;if(!(t instanceof HTMLElement))return;const s=t.closest(".js-emoji-picker"),r=s.querySelector(".js-emoji-picker-filter");s.clear(),!s.hidden&&r&&r.focus()})),t(".js-user-status-message-field",(function(e){S(b(e))})),s("keyup",".js-user-status-message-field",(e=>{const t=e.target;t instanceof HTMLInputElement&&L(t,e)})),s("keyup",".js-emoji-picker-filter",(e=>{const t=e.target;t instanceof HTMLInputElement&&L(t,e)})),a("click",".js-clear-user-status-button",(function(e){const t=e.currentTarget;if(!(t instanceof HTMLButtonElement))return;!function(e){e.hidden=!0,e.querySelector(".js-user-status-emoji-field").value="",e.querySelector(".js-user-status-no-emoji-icon").hidden=!1,e.querySelector(".js-user-status-custom-emoji").innerHTML="";const t=e.querySelector(".js-user-status-message-field");t.value="",t.classList.contains("js-characters-remaining-field")&&u(t);const s=e.querySelector(".selected-emoji.js-user-status-emoji-button");s&&s.classList.remove("selected-emoji"),e.querySelector(".js-user-status-limited-availability-checkbox").checked=!1;const r=e.querySelector(".js-user-status-expiration-date-input");r&&r instanceof HTMLInputElement&&(r.value=""),v(e),S(e);const n=e.querySelector(".js-user-status-form");o(n)}(t.closest(".js-user-status-container"))})),a("click",".js-predefined-user-status",(function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&function(e){const t=e.closest(".js-user-status-container"),s=e.querySelector(".js-predefined-user-status-emoji"),r=e.querySelector(".js-predefined-user-status-message"),n=t.querySelector(".js-user-status-message-field");n.value=(r.textContent||"").trim(),q(t,s),h(t,e),v(t),S(t),n.classList.contains("js-characters-remaining-field")&&u(n)}(t)})),r(".js-user-status-message-field",(function(e){const t=e.target;if(!(t instanceof HTMLElement))return;const s=t.closest(".js-user-status-form");v(s),S(s)})),a("click",".js-user-status-org-button",(function(e){const t=e.currentTarget;t instanceof HTMLButtonElement&&function(e){const t=e.closest(".js-user-status-container"),s=t.querySelector(".js-user-status-org-id-field"),r=t.querySelector(".js-user-status-org-details"),n=t.querySelector(".js-user-status-selected-org"),u=e.querySelector(".js-user-status-org-display"),o=t.querySelector(".js-user-status-org-message"),c=e.value,i=""!==c,a=t.querySelector(".js-user-status-message-field"),l=t.querySelector(".js-user-status-org-button.selected");let d="";l&&l.classList.remove("selected"),e.classList.add("selected"),s.value=c,n.innerHTML="";const f=u.cloneNode(!0);if(f instanceof HTMLElement&&(f.hidden=!1),n.appendChild(f),r.removeAttribute("open"),i){const t=o.getAttribute("data-prefix"),s=o.getAttribute("data-suffix"),r=e.getAttribute("data-org");o.textContent=`${t}${r}${s}`,o.hidden=!1;const n=new URL(a.getAttribute("data-org-url"),window.location.origin),u=new URLSearchParams(n.search.slice(1));u.append("global_id",c),n.search=u.toString(),d=n.toString()}else o.textContent=o.getAttribute("data-none"),o.hidden=!0,d=a.getAttribute("data-no-org-url");a.closest("text-expander").setAttribute("data-mention-url",d)}(t)})),a("change",".js-user-status-limited-availability-checkbox",(function(e){const t=e.target;if(!(t instanceof HTMLInputElement))return;const s=t.closest(".js-user-status-form"),r=t.checked,n=t.getAttribute("data-default-message"),u=s.querySelector(".js-user-status-message-field");r&&u.value.length<1?u.value=n:r||u.value!==n||(u.value=""),v(s),S(s)})),d(".js-user-status-form",(async function(e,t){const s=e.querySelector(".js-user-status-form-group");let r;s.classList.remove("errored");try{r=await t.html()}catch(c){return void s.classList.add("errored")}const n=e.closest(".js-user-status-container"),u=r.html.querySelector(".js-user-status-container");n.replaceWith(r.html);const o=document.querySelectorAll(".js-user-status-container");for(const a of o)if(u!==a){const e=a.closest(".js-user-status-context");if(e){const t=e.getAttribute("data-url"),s=await i(document,t);a.replaceWith(s)}}})),f(".js-toggle-user-status-edit",(function(e){e.addEventListener("mouseenter",T),e.addEventListener("mouseleave",x)}))}}}));
//# sourceMappingURL=chunk-user-status-submit-37ce6ba0.js.map
