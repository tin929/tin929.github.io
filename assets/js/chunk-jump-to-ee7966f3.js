System.register(["./chunk-frameworks.js","./chunk-vendor.js"],(function(){"use strict";var t,e,o,n,s,r,a,c,i,u,l,d,m,p,g,j,f,y;return{setters:[function(j){t=j.ba,e=j.bb,o=j.bc,n=j.bd,s=j.t,r=j.be,a=j.T,c=j.U,i=j.X,u=j.bf,l=j.o,d=j.r,m=j.f,p=j.b,g=j.b4},function(t){j=t.o,f=t.m,y=t.a}],execute:function(){function h(t,e){const o=new URL(t,window.location.origin),n=new URLSearchParams(o.search.slice(1));n.set("q",e);const s=new URLSearchParams(window.location.search).get("type");return s&&n.set("type",s),o.search=n.toString(),o.toString()}function b(t){let s;const[r,a]=t.name.split("/")||[];switch(t.type){case"Project":s=n(t.owner.name,`${t.number}`);break;case"Repository":s=o(r,a);break;case"Team":s=e(r,a);break;default:throw new Error(`Invalid Suggestion type: ${t.type}`)}return s}let S,v={};function q(t){const e=t.getAttribute("data-target-type");if("Search"===e){const e=document.querySelector(".js-site-search-form"),o=e.getAttribute("data-scope-type"),n=t.getAttribute("data-item-type");o&&w({scope_id:parseInt(e.getAttribute("data-scope-id")||"").toString(),scope_type:o,target_scope:n||""}),x("search")}else"Project"!==e&&"Repository"!==e&&"Team"!==e||(w({target_id:parseInt(t.getAttribute("data-target-id")||"").toString(),target_type:e,target_scope:"",client_rank:parseInt(t.getAttribute("data-client-rank")||"").toString(),server_rank:parseInt(t.getAttribute("data-server-rank")||"").toString()}),x("click"))}function x(t){var e,o;if(!parseInt((null===(o=null===(e=document.head)||void 0===e?void 0:e.querySelector('meta[name="octolytics-actor-id"]'))||void 0===o?void 0:o.content)||""))return!1;let n=v.session_id;return("menu-activation"!==t||!n)&&(!("menu-activation"!==t&&!n)&&("menu-activation"===t&&(n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),w({session_id:n})),!!n&&(s(`jump-to-${t}`,v),"menu-deactivation"!==t&&"click"!==t&&"search"!==t||(v={}),!0)))}function w(t){Object.assign(v,t)}function L(t){document.querySelector(".js-jump-to-suggestions-container").classList.remove("d-none"),t.classList.add("jump-to-dropdown-visible"),document.querySelector(".js-jump-to-field").setAttribute("aria-expanded","true")}function A(){document.querySelector(".js-jump-to-suggestions-container").classList.add("d-none");const t=document.querySelector(".js-jump-to-field");t.classList.remove("jump-to-dropdown-visible"),t.setAttribute("aria-expanded","false"),x("menu-deactivation")}function k(t){const e=t.form,o=document.querySelector(".js-jump-to-suggestions-results-container"),n=t.value.trim(),s=!(!t.form||!t.form.getAttribute("data-scope-type")),r="Repository"===(t.form&&t.form.getAttribute("data-scope-type")),a=o.querySelector(".js-jump-to-scoped-search"),c=o.querySelector(".js-jump-to-owner-scoped-search"),i=o.querySelector(".js-jump-to-global-search");if(a.classList.toggle("d-none",!n||!s),c&&c.classList.toggle("d-none",!n||!r),i.classList.toggle("d-none",!n),n&&s){const t=R(a,n,h(e.getAttribute("action"),n),!0,!1);o.replaceChild(t,a)}if(c&&n&&s){const t=R(c,n,h(e.getAttribute("data-owner-scoped-search-url"),n),!0,!0);o.replaceChild(t,c)}if(n){const t=R(i,n,h(e.getAttribute("data-unscoped-search-url"),n),!1,!1);o.replaceChild(t,i)}}function T(t,e,o){if(!t.form)return;const n=E(".js-jump-to-suggestions-template-container"),s=document.createDocumentFragment();if(o.length<1&&!e)!function(){if(!Boolean(null===(e=null===(t=document.head)||void 0===t?void 0:t.querySelector('meta[name="user-login"]'))||void 0===e?void 0:e.content))return;var t,e;const o=E(".js-jump-to-no-results-template-container").cloneNode(!0);o instanceof HTMLElement&&o.classList.remove("d-none");_(o)}();else{for(const[t,r]of o.entries())s.appendChild(I(n,r,e,t));_(s)}}function _(t){const e=document.querySelector(".js-jump-to-suggestions-results-container");for(const o of e.querySelectorAll(".js-jump-to-suggestion"))o.parentNode.removeChild(o);e.appendChild(t)}function C(t,e){const o=t.querySelector(".js-jump-to-octicon"),n=o.querySelector(e);o.classList.remove("d-none"),n.classList.remove("d-none")}function R(t,e,o,n,s){const r=t.cloneNode(!0);r.id=n?"jump-to-suggestion-search-"+(s?"scoped-owner":"scoped"):"jump-to-suggestion-search-global";const a=r.querySelector(".js-jump-to-suggestion-path");a.href=o,a.setAttribute("data-target-type","Search");const c=r.querySelector(".js-jump-to-suggestion-name");c.textContent=e,c.setAttribute("aria-label",e),C(r,".js-jump-to-octicon-search");const i=r.querySelector(".js-jump-to-badge-search");return i.classList.remove("d-none"),n?i.querySelector(".js-jump-to-badge-search-text-default").classList.remove("d-none"):i.querySelector(".js-jump-to-badge-search-text-global").classList.remove("d-none"),r}function I(t,e,o,n){const s=t.cloneNode(!0);s.id=`jump-to-suggestion-${e.type.toLowerCase()}-${e.databaseId}`;const a=s.querySelector(".js-jump-to-suggestion-path");a.href=e.path,a.setAttribute("data-target-type",e.type),a.setAttribute("data-target-id",`${e.databaseId}`),a.setAttribute("data-client-rank",`${n}`),a.setAttribute("data-server-rank",`${e.rank}`);const c=s.querySelector(".js-jump-to-suggestion-name");switch(c.textContent=e.name,c.setAttribute("aria-label",e.name),r(c,o.replace(/\s/g,"")),e.type){case"Team":{const t=s.querySelector(".js-jump-to-suggestion-avatar");t.alt=e.name,t.src=e.avatarUrl?e.avatarUrl:"",t.classList.remove("d-none");break}case"Project":C(s,".js-jump-to-octicon-project");break;case"Repository":C(s,".js-jump-to-octicon-repo")}return s.querySelector(".js-jump-to-badge-jump").classList.remove("d-none"),s}function E(t){return document.querySelector(".js-jump-to-suggestions-container").querySelector(t).firstElementChild}function $(e,o){const n=e.value.trim(),s=function(t,e){const o=u(e);return t.sort(((t,e)=>o(e.pageKey)-o(t.pageKey)))}(function(t,e,o){const n=e.replace(/\s/g,"").toLowerCase(),s=t.filter((t=>t.path!==o));return n?a(s,(t=>{const e=t.name,o=i(e,n);return o>0?{score:o,text:e}:null}),c):s}(o,n,window.location.pathname),t()),r=s.slice(0,7);w({result_count:s.length.toString(),display_count:r.length.toString(),filter_count:(o.length-s.length).toString(),query:n,display_set:JSON.stringify(r.map((t=>[t.type,t.databaseId])))}),T(e,n,r),x("menu-activation")||x("query")}async function U(e){const o=e.getAttribute("data-jump-to-suggestions-path"),n=function(){const e=new FormData;for(const o of Object.keys(t()))e.append("variables[pageViews][]",o);return e}(),s=g(e,"js-data-jump-to-suggestions-path-csrf");if(!s)return[];let r=[];const a=await fetch(o,{method:"POST",mode:"same-origin",body:n,headers:{Accept:"application/json","Scoped-CSRF-Token":s.value,"X-Requested-With":"XMLHttpRequest"}});a.ok&&(r=function(t){if("errors"in t.data)return[];let e=1;const o=[];for(const n of t.data.suggestions.nodes)null!=n&&(n.rank=e++,n.pageKey=b(n),"Team"===n.type&&(n.name=`@${n.name}`),o.push(n));return o}(await a.json()));const c=document.querySelector(".js-search-commands");if(c instanceof HTMLInputElement){const t=c.value;let e=[];try{e=JSON.parse(t).commands}catch(i){}r=r.concat(e)}return r}async function P(t){const e=t;!function(t){t.classList.add("js-navigation-enable"),t.classList.add("jump-to-field-active")}(e),L(e),S||(S=U(e)),k(e),M(e),$(e,await S)}j(".js-jump-to-field",{constructor:HTMLInputElement,add(t){t.addEventListener("input",f((async function(){k(t),M(t),$(t,await S)}),100)),document.activeElement&&document.activeElement===t&&P(t)}}),l(".js-jump-to-field",P),y("navigation:keydown",".js-site-search-form",(function(t){const e=t.currentTarget.querySelector(".js-navigation-item.navigation-focus");switch(t.detail.hotkey){case"Enter":if(e)q(e.querySelector(".js-jump-to-suggestion-path"));else{const e=t.currentTarget;d(e)}break;case"Escape":t.currentTarget.querySelector(".js-jump-to-field").blur(),A()}})),y("navigation:focus",".js-site-search-form",(function(t){const e=document.querySelector(".js-jump-to-field"),o=t.target.id,n=t.target.closest(".js-jump-to-suggestions-results-container");for(const s of n.querySelectorAll(".js-navigation-item"))s.setAttribute("aria-selected",(t.target===s).toString());e.setAttribute("aria-activedescendant",o)}));let N=null;function M(t){const e=t.value.trim(),o=document.querySelector(".js-jump-to-suggestions-results-container");e?m(o):p(o)}y("focusout",".js-jump-to",(function(){const t=document.querySelector(".js-jump-to-field");N=window.setTimeout((()=>{!function(t){t.classList.remove("js-navigation-enable"),t.classList.remove("jump-to-field-active")}(t),A()}),200)})),y("focusin",".js-jump-to",(function(){N&&window.clearTimeout(N);L(document.querySelector(".js-jump-to-field"))})),y("click",".js-jump-to-suggestion-path",(function(t){const e=t.currentTarget;if("Search"===e.getAttribute("data-target-type")){const t=document.querySelector(".js-jump-to-field");e.href=function(t,e){const o=new URL(e,window.location.origin),n=new URLSearchParams(o.search.slice(1));return n.get("q")&&n.set("q",t),o.search=n.toString(),o.toString()}(t.value.trim(),e.href)}q(e)})),y("submit",".js-site-search-form",(function(t){if(!document.querySelector(".js-jump-to-field"))return;t.target.getAttribute("data-scoped-search-url")&&w({}),x("search")}))}}}));
//# sourceMappingURL=chunk-jump-to-b0b34d77.js.map
