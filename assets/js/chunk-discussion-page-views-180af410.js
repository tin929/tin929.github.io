System.register(["./chunk-vendor.js","./chunk-band.js","./chunk-tip.js","./chunk-frameworks.js","./chunk-array.js"],(function(){"use strict";var t,a,e,n,r,s,o,i,c,l,d,u,p,f,g,h;return{setters:[function(n){t=n._,a=n.t,e=n.c},function(t){n=t.b,r=t.o},function(t){s=t.z,o=t.s,i=t.m,c=t.h,l=t.g,d=t.j},function(t){u=t.m,p=t.aX},function(t){f=t.f,g=t.g,h=t.u}],execute:function(){function m(t,a){if((r=t.length)>1)for(var e,n,r,s=1,o=t[a[0]],i=o.length;s<r;++s)for(n=o,o=t[a[s]],e=0;e<i;++e)o[e][1]+=o[e][0]=isNaN(n[e][1])?n[e][0]:n[e][1]}function y(t){for(var a=t.length,e=new Array(a);--a>=0;)e[a]=a;return e}function v(t,a){return t[a]}function k(t){const a=[];return a.key=t,a}const x=u((async function(t){const a=await p(t,{headers:{accept:"application/json"}});return await a}));let w=class DiscussionPageViewsGraphElement extends HTMLElement{async connectedCallback(){const t=this.graph,a=t.getAttribute("data-url");if(a){t.classList.add("is-graph-loading"),t.classList.remove("is-graph-load-error","is-graph-empty");try{const e=await x(a);t.classList.remove("is-graph-loading");const n=await e.json();new ResizeObserver((a=>{for(const e of t.querySelectorAll("svg.viz"))e.remove();for(const e of a)e.target===t&&b(t,n)})).observe(t)}catch(e){if(t.classList.remove("is-graph-loading"),404!==e.response.status)throw t.classList.add("is-graph-load-error"),e;t.classList.add("is-graph-empty")}}}};function b(t,a){const e=t.clientWidth,u=t.clientHeight,p=50,x=40,w=50,b=e-w-20,j=u-p-x,A=h("%-m/%-d"),$=s().attr("class","svg-tip").offset([-10,0]).html((function(t){return`<strong>${t.data.group}</strong><br>\n      ${t.data.anonymous} anonymous visits<br>\n      ${t.data["logged in"]} logged in visits`})),z=o(t).append("svg").attr("class","viz").attr("width",e).attr("height",u).attr("alt","A graph of the page views for discussions in this repository").attr("aria-describedby","discussion-page-views-description").append("g").attr("transform",`translate(${w},${p})`).call($);let L="";for(const n of a){L+=`${n.name}: `;for(const t of n.data)L+=`${t.value} on ${A(new Date(t.date))} `}z.append("div").attr("text",L).attr("style","display: none;").attr("id","discussion-page-views-description");for(const n of a)z.append("circle").attr("cx",b-n.delta).attr("cy",-p/2).attr("class",n.class).attr("r",5),z.append("text").attr("x",b-n.delta+10).attr("y",-p/2+5).attr("class","legend-text").text(n.name);const S=i(a[0].data.map((t=>t.value)))+i(a[1].data.map((t=>t.value))),D=a[0].data.map((t=>A(new Date(t.date)))),E=n().domain(D).range([0,b]).padding(.2);z.append("g").attr("transform",`translate(0, ${j})`).attr("class","tick-labels-x").call(c(E).tickSize(0).tickValues(D));const H=l().domain([0,S]).range([j,0]);z.append("g").attr("class","tick-labels-y").call(d(H).ticks(4).tickSize(0)),z.append("g").attr("class","tick-y").call(d(H).ticks(4).tickSize(-b).tickFormat((()=>""))),z.append("text").attr("class","axis-label").attr("text-anchor","middle").attr("x",b/2).attr("y",u-p).text("Timeline"),z.append("text").attr("class","axis-label").attr("transform","rotate(-90)").attr("x",-j/2).attr("y",-x-10).attr("dy","0.71em").style("text-anchor","middle").text("Quantity");const N=[];for(const[n,r]of a[0].data.map((t=>t.date)).entries())N.push({group:A(new Date(r)),"logged in":a[0].data[n].value,anonymous:a[1].data[n].value});const T=a.map((t=>t.name)),V=r().domain(T).range(a.map((t=>t.class))),q=function(){var t=g([]),a=y,e=m,n=v;function r(r){var s,o,i=Array.from(t.apply(this,arguments),k),c=i.length,l=-1;for(const t of r)for(s=0,++l;s<c;++s)(i[s][l]=[0,+n(t,i[s].key,l,r)]).data=t;for(s=0,o=f(a(i));s<c;++s)i[o[s]].index=s;return e(i,o),i}return r.keys=function(a){return arguments.length?(t="function"==typeof a?a:g(Array.from(a)),r):t},r.value=function(t){return arguments.length?(n="function"==typeof t?t:g(+t),r):n},r.order=function(t){return arguments.length?(a=null==t?y:"function"==typeof t?t:g(Array.from(t)),r):a},r.offset=function(t){return arguments.length?(e=null==t?m:t,r):e},r}().keys(T)(N);z.append("g").selectAll("g").data(q).join("g").attr("class",(function(t){return V(t.key)})).selectAll("rect").data((t=>t)).join("rect").attr("x",(t=>E(t.data.group))).attr("y",(function(t){return 0===t[0]?H(t[1])+2:H(t[1])})).attr("height",(function(t){return 0===t[0]?H(t[0])-H(t[1])-2:H(t[0])-H(t[1])})).attr("width",E.bandwidth()).on("mouseover",$.show).on("mouseout",$.hide)}t([a],w.prototype,"graph",void 0),w=t([e],w)}}}));
//# sourceMappingURL=chunk-discussion-page-views-e8768c97.js.map
