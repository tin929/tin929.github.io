function maudio(a){var c={obj:a.obj?a.obj:"audio",fastStep:a.fastStep?a.fastStep:10};c.tpl='    <div class="maudio">      <audio src="" initaudio="false"></audio>      <div class="audio-control">          <a href="javascript:;" class="fast-reverse"></a>          <a href="javascript:;" class="play"></a>          <a href="javascript:;" class="fast-forward"></a>          <div class="progress-bar">              <div class="progress-pass"></div>          </div>          <div class="time-keep">              <span class="current-time">00:00</span> / <span class="duration">00:00</span>          </div>          <a class="mute"></a>          <div class="volume-bar">              <div class="volume-pass"></div>          </div>      </div>    </div>';var e=$(c.obj).parents(window);if(!$(c.obj).parent(".maudio").length||!$(c.obj).next("div.audio-control").length){window.tDuration=window.tDuration?window.tDuration:{};$(c.obj).each(function(g){$(this).before(c.tpl);var j=$(this).prev("div.maudio");var h=j.children("audio")[0];h.src=$(this).attr("src")||$(this).children("source").attr("src");window.tDuration[c.obj+h.src+"_"+g]=setInterval(function(){if(h.duration){j.find(".time-keep .duration").text(f(h.duration));clearInterval(window.tDuration[c.obj+h.src+"_"+g])}},100);$(this).remove()})}function d(g,i){var h=100*currentAudio.currentTime/currentAudio.duration;currentAudioBox.find(".progress-pass").css({width:h+"%"});currentAudioBox.find(".current-time").text(f(currentAudio.currentTime));if(currentAudio.currentTime>=currentAudio.duration){currentAudioBox.removeClass("playing");clearInterval(t)}}function b(){$(e).find(".audio-control .play").off("click");$(e).find(".audio-control .play").on("click",function(){var h=$(this).parent(".audio-control").parent(".maudio");var g=h.children("audio")[0];if(h.hasClass("playing")){g.pause();h.removeClass("playing")}else{$(e).find(".playing").each(function(){$(this).children("audio")[0].pause();$(this).removeClass("playing")});g.play();h.addClass("playing");currentAudio=g;currentAudioBox=h;window.t=window.setInterval(function(){d()},500)}});$(e).find(".audio-control .fast-reverse").off("click");$(e).find(".audio-control .fast-reverse").on("click",function(){currentAudio.currentTime-=c.fastStep});$(e).find(".audio-control .fast-forward").off("click");$(e).find(".audio-control .fast-forward").on("click",function(){currentAudio.currentTime+=c.fastStep});$(e).find(".audio-control .volume-bar").off("click");$(e).find(".audio-control .volume-bar").on("click",function(i){var h=$(this).parent(".audio-control").parent(".maudio");var g=h.children("audio")[0];var j=i.offsetX/h.find(".volume-bar").width();h.find(".volume-pass").css({width:j*100+"%"});g.volume=j>1?1:j});$(e).find(".audio-control .mute").off("click");$(e).find(".audio-control .mute").on("click",function(i){var h=$(this).parent(".audio-control").parent(".maudio");var g=h.children("audio")[0];if($(this).hasClass("muted")){g.muted=false;$(this).removeClass("muted")}else{g.muted=true;$(this).addClass("muted")}});$(e).find(".audio-control .progress-bar").off("click");$(e).find(".audio-control .progress-bar").on("click",function(i){var h=$(this).parent(".audio-control").parent(".maudio");var g=h.children("audio")[0];var j=i.offsetX/h.find(".progress-bar").width();h.find(".progress-pass").css({width:j*100+"%"});g.currentTime=g.duration*j;h.find(".current-time").text(f(g.currentTime))});$(e).find(".maudio audio").off("play");$(e).find(".maudio audio").on("play",function(){if(!$(this).parent(".maudio").hasClass("playing")){$(this).parent(".maudio").addClass("playing")}});$(e).find(".maudio audio").off("pause");$(e).find(".maudio audio").on("pause",function(){if($(this).parent(".maudio").hasClass("playing")){$(this).parent(".maudio").removeClass("playing")}})}b();function f(i){var g=parseInt(i/60);var h=parseInt(i%60);return(g<10?"0"+g:g)+":"+(h<10?"0"+h:h)}}maudio({obj:"audio",fastStep:10});