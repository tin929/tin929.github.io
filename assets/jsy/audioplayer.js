(function(a,k,c,j){var h="ontouchstart" in k,g=h?"touchstart":"mousedown",f=h?"touchmove":"mousemove",e=h?"touchend":"mouseup",d=h?"touchcancel":"mouseup",i=function(o){var l=Math.floor(o/3600),m=Math.floor(o%3600/60),n=Math.ceil(o%3600%60);return(l==0?"":l>0&&l.toString().length<2?"0"+l+":":l+":")+(m.toString().length<2?"0"+m:m)+":"+(n.toString().length<2?"0"+n:n)},b=function(m){var l=c.createElement("audio");return !!(l.canPlayType&&l.canPlayType("audio/"+m.split(".").pop().toLowerCase()+";").replace(/no/,""))};a.fn.audioPlayer=function(n){var n=a.extend({classPrefix:"audioplayer",strPlay:"",strPause:"",strVolume:""},n),l={},m={playPause:"playpause",playing:"playing",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",mute:"mute",mini:"mini"};for(var o in m){l[o]=n.classPrefix+"-"+m[o]}this.each(function(){if(a(this).prop("tagName").toLowerCase()!="audio"){return false}var p=a(this),s=p.attr("src"),v=p.get(0).getAttribute("autoplay"),v=v===""||v==="autoplay"?true:false,w=p.get(0).getAttribute("loop"),w=w===""||w==="loop"?true:false,x=false;if(typeof s==="undefined"){p.find("source").each(function(){s=a(this).attr("src");if(typeof s!=="undefined"&&b(s)){x=true;return false}})}else{if(b(s)){x=true}}var A=a('<div class="'+n.classPrefix+'">'+(x?a("<div>").append(p.eq(0).clone()).html():'<embed src="'+s+'" width="0" height="0" volume="100" autostart="'+v.toString()+'" loop="'+w.toString()+'" />')+'<div class="'+l.playPause+'" title="'+n.strPlay+'"><a href="#">'+n.strPlay+"</a></div></div>"),y=x?A.find("audio"):A.find("embed"),y=y.get(0);if(x){A.find("audio").css({width:0,height:0,visibility:"hidden"});A.append('<div class="'+l.time+" "+l.timeCurrent+'"></div><div class="'+l.bar+'"><div class="'+l.barLoaded+'"></div><div class="'+l.barPlayed+'"></div></div><div class="'+l.time+" "+l.timeDuration+'"></div><div class="'+l.volume+'"><div class="'+l.volumeButton+'" title="'+n.strVolume+'"><a href="#">'+n.strVolume+'</a></div><div class="'+l.volumeAdjust+'"><div><div></div></div></div></div>');var z=A.find("."+l.bar),u=A.find("."+l.barPlayed),t=A.find("."+l.barLoaded),B=A.find("."+l.timeCurrent),C=A.find("."+l.timeDuration),F=A.find("."+l.volumeButton),E=A.find("."+l.volumeAdjust+" > div"),G=0,q=function(J){theRealEvent=h?J.originalEvent.touches[0]:J;y.currentTime=Math.round((y.duration*(theRealEvent.pageX-z.offset().left))/z.width())},r=function(J){theRealEvent=h?J.originalEvent.touches[0]:J;y.volume=Math.abs((theRealEvent.pageX-E.offset().left)/E.width())},D=setInterval(function(){if(y.buffered.length>0){t.width((y.buffered.end(0)/y.duration)*100+"%");if(y.buffered.end(0)>=y.duration){clearInterval(D)}}},100);var H=y.volume,I=y.volume=0.111;if(Math.round(y.volume*1000)/1000==I){y.volume=H}else{A.addClass(l.noVolume)}C.html("&hellip;");B.text(i(0));y.addEventListener("loadeddata",function(){C.text(i(y.duration));E.find("div").width(y.volume*100+"%");G=y.volume});y.addEventListener("timeupdate",function(){B.text(i(y.currentTime));u.width((y.currentTime/y.duration)*100+"%")});y.addEventListener("volumechange",function(){E.find("div").width(y.volume*100+"%");if(y.volume>0&&A.hasClass(l.mute)){A.removeClass(l.mute)}if(y.volume<=0&&!A.hasClass(l.mute)){A.addClass(l.mute)}});y.addEventListener("ended",function(){A.removeClass(l.playing)});z.on(g,function(J){q(J);z.on(f,function(K){q(K)})}).on(d,function(){z.unbind(f)});F.on("click",function(){if(A.hasClass(l.mute)){A.removeClass(l.mute);y.volume=G}else{A.addClass(l.mute);G=y.volume;y.volume=0}return false});E.on(g,function(J){r(J);E.on(f,function(K){r(K)})}).on(d,function(){E.unbind(f)})}else{A.addClass(l.mini)}if(v){A.addClass(l.playing)}A.find("."+l.playPause).on("click",function(){if(A.hasClass(l.playing)){a(this).attr("title",n.strPlay).find("a").html(n.strPlay);A.removeClass(l.playing);x?y.pause():y.Stop()}else{a(this).attr("title",n.strPause).find("a").html(n.strPause);A.addClass(l.playing);x?y.play():y.Play()}return false});p.replaceWith(A)});return this}})(jQuery,window,document);